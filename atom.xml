<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://gXiaofei.github.io</id>
    <title>gXiaofei</title>
    <updated>2020-08-31T14:54:20.212Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://gXiaofei.github.io"/>
    <link rel="self" href="https://gXiaofei.github.io/atom.xml"/>
    <subtitle>å‰ç«¯å‘å‰</subtitle>
    <logo>https://gXiaofei.github.io/images/avatar.png</logo>
    <icon>https://gXiaofei.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, gXiaofei</rights>
    <entry>
        <title type="html"><![CDATA[webpack]]></title>
        <id>https://gXiaofei.github.io/post/webpack/</id>
        <link href="https://gXiaofei.github.io/post/webpack/">
        </link>
        <updated>2020-08-29T01:30:48.000Z</updated>
        <content type="html"><![CDATA[<p><code>webpack</code> æ˜¯ä¸€ä¸ªæ‰“åŒ…æ¨¡å—åŒ–<code>javascript</code>çš„å·¥å…·ï¼Œå®ƒä¼šä»å…¥å£æ¨¡å—è§¦å‘ï¼Œè¯†åˆ«å‡ºæºç ä¸­çš„æ¨¡å—åŒ–å¯¼å…¥è¯­å¥ï¼Œé€’å½’çš„å€¼æ‰¾å‡ºå…¥å£æ–‡ä»¶çš„æ‰€æœ‰ä¾èµ–ï¼Œå°†å…¥å£å’Œå…¶æ‰€æœ‰çš„ä¾èµ–æ‰“åŒ…åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ã€‚</p>
<p>å®‰è£…<code>webpack</code> v4+ç‰ˆæœ¬æ—¶ï¼Œ éœ€è¦é¢å¤–çš„å®‰è£…webpack-cli</p>
<p><code>npm install webpack webpack-cli -D</code></p>
<ul>
<li><code>webpack</code> é»˜è®¤æ”¯æŒJSæ¨¡å—å’ŒJSONæ¨¡å—</li>
<li>æ”¯æŒ<code>CommonJS</code> <code>Es</code>  <code>module</code> <code>AMD</code>ç­‰æ¨¡å—ç±»å‹</li>
<li><code>webpack4</code> æ”¯æŒé›¶é…ç½®ä½¿ç”¨ï¼Œä½†æ˜¯å¾ˆå¼±ï¼Œç¨å¾®å¤æ‚äº›çš„åœºæ™¯éƒ½éœ€è¦é¢å¤–æ‰©å±•</li>
</ul>
<p>ä¸€èˆ¬é…ç½®</p>
<pre><code class="language-javascript">// webpack åŸºäºnodeJS
const path = require('path')

module.exports = {
    // webpack æ„å»ºçš„å…¥å£ å¿…å¡«  å¯ä»¥æ˜¯å­—ç¬¦ä¸² æ•°ç»„ å¯¹è±¡
    // è¿™é‡Œä½¿ç”¨ç›¸å¯¹è·¯å¾„
    entry: './src/index.js',
    // webpack æ„å»ºçš„å‡ºå£ 
    output: {
        // è¿™é‡Œçš„pathä½¿ç”¨ç»å¯¹è·¯å¾„
        path: path.resolve(__dirname, './dist'),
        // è¾“å‡ºçš„jså¯ä»¥ä½¿ç”¨å ä½ç¬¦
        filename: '[name].[hash:6].js'
    }
}
</code></pre>
<h3 id="entry"><code>entry</code></h3>
<p>å…¥å£ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸² æ•°ç»„ å¯¹è±¡ï¼Œæ˜¯å¯¹è±¡å°±æ˜¯å¤šå…¥å£ï¼Œå¤šå…¥å£éœ€è¦å¯¹åº”å¤šå‡ºå£</p>
<pre><code class="language-javascript">// å­—ç¬¦ä¸²
entry: './src/index.js'
// æ•°ç»„
entry: ['./src/index.js', './src/login.js']
// å¯¹è±¡ å¤šå…¥å£ å¤šä¸ªchunk ä¸€ä¸ªchunkå¯¹åº”ä¸€ä¸ªæ–‡ä»¶ 
entry: {index: './src/index.js', login: './src/login.js'}
</code></pre>
<h3 id="output"><code>output</code></h3>
<p>å‡ºå£ webpackç»è¿‡ä¸€ç³»åˆ—çš„å¤„ç†å¹¶å¾—å‡ºæœ€ç»ˆæƒ³è¦çš„ä»£ç åçš„è¾“å‡ºç»“æœ</p>
<pre><code class="language-javascript">output: {
    // è¾“å‡ºæ–‡ä»¶åœ¨ç£ç›˜çš„ä½ç½®ï¼Œè¿™é‡Œæ˜¯ç»å¯¹è·¯å¾„
    path: path.resolve(__dirname, './dist'),
    // è¾“å‡ºçš„æ–‡ä»¶åç§°
    filename: '[name].[hash:6].js'
}

// å¤šå…¥å£å¤„ç†
output: {
    // è¾“å‡ºæ–‡ä»¶åœ¨ç£ç›˜çš„ä½ç½®ï¼Œè¿™é‡Œæ˜¯ç»å¯¹è·¯å¾„
    path: path.resolve(__dirname, './dist'),
    // åˆ©ç”¨å ä½ç¬¦ æ–‡ä»¶åç§°ä¸èƒ½é‡å¤
    filename: '[name].[chunkhash:6].js'
}
</code></pre>
<h3 id="mode"><code>mode</code></h3>
<p>ç”¨æ¥æŒ‡å®šå½“å‰çš„æ„å»ºç¯å¢ƒ<br>
<img src="https://gXiaofei.github.io/post-images/1598666724671.jpg" alt="" loading="lazy"></p>
<p><code>mode: development</code> å¼€å‘é˜¶æ®µå¼€å¯ï¼Œæœ‰åˆ©äºçƒ­æ›´æ–°çš„å¤„ç†ï¼Œè¯†åˆ«å“ªä¸ªæ¨¡å—å˜åŒ–<br>
<code>mode: production</code> ç”Ÿäº§é˜¶æ®µå¼€å¯ï¼Œä¼šå¸®åŠ©æ¨¡å—å‹ç¼©ï¼Œå¤„ç†ä¸€äº›å‰¯ä½œç”¨ç­‰åŠŸèƒ½</p>
<h3 id="loader"><code>loader</code></h3>
<p>æ¨¡å—è§£æï¼Œæ¨¡å—è½¬åŒ–å™¨ï¼Œç”¨äºæŠŠæ¨¡å—åŸå†…å®¹æŒ‰ç…§éœ€è¦è½¬æ¢æˆæ–°å†…å®¹<br>
å› ä¸º<code>webpack</code> é»˜è®¤æ”¯æŒ<code>.json</code> <code>.js</code>æ¨¡å—ï¼Œä¸æ”¯æŒå…¶ä»–æ ¼å¼çš„æ¨¡å—<br>
<code>loader</code>çš„æ‰§è¡Œé¡ºåº ä»åå¾€å‰</p>
<pre><code class="language-javascript">...
module: {
    // loader æ¨¡å—è½¬æ¢
    rules: [
        {
            test: /\.css/i,
            // css-loader è¨€ç®€æ„èµ… æŠŠcsså†…å®¹åŠ åˆ°jså†…å®¹ä¸­å»
            // style-loader ä»jsä¸­æå–cssçš„loader åœ¨htmlåˆ›å»ºstyleæ ‡ç­¾ï¼ŒæŠŠcsså†…å®¹æ”¾åœ¨è¿™ä¸ªstyleæ ‡ç­¾ä¸­
            use: ['style.loader', 'css-loader']
        }
    ]
}

// å¼€å¯css module

use: [
    'style-loader',
    {
        loader: 'css-loader',
        options: {
            // å¼€å¯css modules
            modules: true
        }
    }
]
...
</code></pre>
<p>å¸¸è§çš„loader</p>
<pre><code class="language-javascript">style-loader
css-loader
less-loader
sacc-loader
ts-loader // å°†tsè½¬æ¢æˆjs
babel-loader // å°†ES6, 7ç­‰å°±æ˜¯æ–°ç‰¹æ€§è¯­æ³•
</code></pre>
<h3 id="module"><code>module</code></h3>
<p>æ¨¡å—ï¼Œåœ¨<code>webpack</code>é‡Œä¸€åˆ‡çš†æ¨¡å—ï¼Œä¸€ä¸ªæ¨¡å—å¯¹åº”ä¸€ä¸ªæ–‡ä»¶ã€‚<code>webpack</code>ä¼šä»é…ç½®çš„Entry å¼€å§‹é€’å½’æ‰¾å‡ºæ‰€æœ‰ä¾èµ–çš„æ¨¡å—<br>
å½“<code>webpack</code>å¤„ç†åˆ°ä¸è®¤è¯†çš„æ¨¡å—æ—¶ï¼Œéœ€è¦åœ¨<code>webpack</code>ä¸­çš„moduleå¤„è¿›è¡Œé…ç½®ï¼Œå½“æ£€æµ‹åˆ°æ˜¯ä»€ä¹ˆæ ¼å¼çš„æ¨¡å—ï¼Œä½¿ç”¨ä»€ä¹ˆ<code>loader</code>æ¥å¤„ç†</p>
<pre><code class="language-javascript">module: {
    rules: [
        {
            test: /\.xxx$/, // æŒ‡å®šåŒ¹é…è§„åˆ™
            use: {
                loader: 'xxx-loader' // æŒ‡å®šä½¿ç”¨çš„loader
            }
        }
    ]
}
</code></pre>
<h3 id="plugins"><code>plugins</code></h3>
<p>ä½œç”¨äº<code>webpack</code>æ‰“åŒ…æ•´ä¸ªè¿‡ç¨‹<br>
<code>webpack</code>çš„æ‰“åŒ…è¿‡ç¨‹æ˜¯æœ‰ï¼ˆç”Ÿå‘½å‘¨æœŸæ¦‚å¿µï¼‰é’©å­<br>
<code>plugins</code>å¯ä»¥åœ¨<code>webpack</code>è¿è¡Œåˆ°æŸä¸ªé˜¶æ®µçš„æ—¶å€™ï¼Œå¸®ä½ åšä¸€äº›äº‹æƒ…ï¼Œç±»ä¼¼äºç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µï¼Œæœ‰åŒæ­¥ï¼Œå¼‚æ­¥çš„æ‰§è¡Œ</p>
<p>æ‰©å±•æ’ä»¶ï¼Œåœ¨<code>webpack</code>æ„å»ºæµç¨‹ä¸­çš„ç‰¹å®šæ—¶é—´æ³¨å…¥æ‰©å±•é€»è¾‘æ¥æ”¹å˜æ„å»ºç»“æœæˆ–ä½ æƒ³è¦çš„äº‹æƒ…<br>
ä½œç”¨äºæ•´ä¸ªæ„å»ºè¿‡ç¨‹</p>
<p>const webpack = require('webpack');  // è®¿é—®å†…ç½®æ’ä»¶</p>
<ul>
<li>HtmlWebpackPlugin<br>
<code>htmlwebpackplugin</code> ä¼šåœ¨æ‰“åŒ…ç»“æŸåï¼Œè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªhtmlæ–‡ä»¶ï¼Œå¹¶æŠŠæ‰“åŒ…ç”Ÿæˆçš„jsæ¨¡å—å¼•å…¥åˆ°é«˜htmlä¸­</li>
</ul>
<pre><code class="language-javascript">yarn add html-webpacl-plugin -D
 
title: â½¤ç”¨æ¥â½£ç”Ÿæˆâ»šé¡µâ¾¯é¢çš„ title å…ƒç´ 
filename: è¾“å‡ºçš„ HTML â½‚æ–‡ä»¶åï¼Œé»˜è®¤æ˜¯ index.html, ä¹Ÿå¯ä»¥ç›´ æ¥é…ç½®å¸¦æœ‰â¼¦å­â½¬ç›®å½•ã€‚
template: æ¨¡æ¿â½‚æ–‡ä»¶è·¯è·¯å¾„ï¼Œâ½€æ”¯æŒåŠ è½½å™¨å™¨ï¼Œâ½æ¯”å¦‚ html!./index.html
inject: true | 'head' | 'body' | false ,æ³¨â¼Šå…¥æ‰€æœ‰çš„èµ„ æºåˆ°ç‰¹å®šçš„ template æˆ–è€… templateContent ä¸­ï¼Œå¦‚æœè®¾ç½®ä¸º true æˆ–è€… bodyï¼Œæ‰€æœ‰çš„ javascript èµ„æºå°†è¢«æ”¾ç½®åˆ° body å…ƒ ç´ çš„åº•éƒ¨ï¼Œ'head' å°†æ”¾ç½®åˆ° head å…ƒç´ ä¸­ã€‚
favicon: æ·»åŠ ç‰¹å®šçš„ favicon è·¯è·¯å¾„åˆ°è¾“å‡ºçš„ HTML â½‚æ–‡ä»¶ä¸­ã€‚ minify: {} | false , ä¼ é€’ html-minifier é€‰é¡¹ç»™ minify è¾“å‡º
hash: true | false, å¦‚æœä¸º true, å°†æ·»åŠ â¼€ä¸€ä¸ªå”¯â¼€ä¸€çš„ webpack ç¼–è¯‘ hash åˆ°æ‰€æœ‰åŒ…å«çš„è„šæœ¬å’Œ CSS â½‚æ–‡ä»¶ï¼Œå¯¹äºè§£é™¤ cache å¾ˆæœ‰â½¤ç”¨ã€‚
cache: true | falseï¼Œå¦‚æœä¸º true, è¿™æ˜¯é»˜è®¤å€¼ï¼Œä»…ä»…åœ¨â½‚æ–‡ä»¶ ä¿®æ”¹ä¹‹åæ‰ä¼šå‘å¸ƒâ½‚æ–‡ä»¶ã€‚
showErrors: true | false, å¦‚æœä¸º true, è¿™æ˜¯é»˜è®¤å€¼ï¼Œé”™è¯¯ ä¿¡æ¯ä¼šå†™â¼Šå…¥åˆ° HTML â»šé¡µâ¾¯é¢ä¸­
chunks: å…è®¸åªæ·»åŠ æŸäº›å— (â½æ¯”å¦‚ï¼Œä»…ä»… unit test å—) chunksSortMode: å…è®¸æ§åˆ¶å—åœ¨æ·»åŠ åˆ°â»šé¡µâ¾¯é¢ä¹‹å‰çš„æ’åºâ½…æ–¹å¼ï¼Œâ½€æ”¯æŒ çš„å€¼:'none' | 'default' | {function}-default:'auto' excludeChunks: å…è®¸è·³è¿‡æŸäº›å—ï¼Œ(â½æ¯”å¦‚ï¼Œè·³è¿‡å•å…ƒæµ‹è¯•çš„å—)


// æ¡ˆä¾‹
const path = require('path')
const htmlWebpackPlugin = require('html-webpack-plugin')
module.exports = {
    ...
    plugins: [
        new htmlWebpackPlugin({
            title: 'My app',
            filename: 'app.html',
            template: './src/index.html'
        })
    ]
}

//src/index.html
&lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;UTF-8&quot; /&gt;
&lt;meta name=&quot;viewport&quot; content=&quot;width=device-
width, initial-scale=1.0&quot; /&gt;
&lt;meta http-equiv=&quot;X-UA-Compatible&quot;
content=&quot;ie=edge&quot; /&gt;
&lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;
&lt;/title&gt;
  &lt;/head&gt;
&lt;body&gt;
&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<ul>
<li>clean-webpack-plugin<br>
æ¯æ¬¡æ„å»ºä¼šè‡ªåŠ¨æ¸…é™¤ä¸Šæ¬¡æ„å»ºçš„æ–‡ä»¶</li>
</ul>
<pre><code class="language-javascript">yarn add clean-webpack-plugin -D

const {CleanWebpackPlugin} = require('clean-webpack-plugin');

...

plugins: [
    new CleanWebpackPlugin()
]
</code></pre>
<p>å ä½ç¬¦<br>
name</p>
<p>hash æ•´ä¸ªé¡¹ç›®çš„hashå€¼ï¼Œæ¯æ„å»ºä¸€æ¬¡ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªhashï¼Œæ–‡ä»¶å†…å®¹ä¸æ”¹å˜ï¼Œhashå€¼ä¸å˜<br>
hash å¯ä»¥ä½œç”¨äºç¼“å­˜<br>
chunkhash æ ¹æ®ä¸åŒå…¥å£entryè¿›è¡Œä¾èµ–è§£æï¼Œ æ„æˆå¯¹åº”çš„chunkï¼Œç”Ÿæˆå¯¹åº”çš„chunkhashï¼Œä¸€èˆ¬ç”¨äºå¤šå…¥å£<br>
åªè¦ç»„æˆentryçš„å†…å®¹æ¨¡å—æ²¡æœ‰æ”¹å˜ï¼Œåˆ™å¯¹åº”çš„chunkhashä¸å˜<br>
contenthash ä¸€èˆ¬ç”¨äºæŠ½ç¦»å‡ºçš„cssæ–‡ä»¶ è·Ÿå†…å®¹ç»‘å®šï¼Œæ–‡ä»¶å†…å®¹ä¸å˜ï¼Œhashä¸å˜</p>
<p>id</p>
<p>ä½¿ç”¨ è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼š æ¯”å¦‚webpackconfig.js ï¼Œå¯ä»¥é€šè¿‡ --config webpackconfig.js æŒ‡å®šwebpackä½¿ç”¨å“ªä¸ªé…ç½®æ–‡ä»¶æ¥æ‰§è¡Œæ„å»º</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://gXiaofei.github.io/post/hello-gridea/</id>
        <link href="https://gXiaofei.github.io/post/hello-gridea/">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="https://gridea.dev/">Gridea ä¸»é¡µ</a><br>
<a href="http://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>Windows</strong>ï¼Œ<strong>MacOS</strong> æˆ– <strong>Linux</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
</feed>